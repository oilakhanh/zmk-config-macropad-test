#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/mouse.h>
#include <dt-bindings/zmk/pointing.h>

/ {
    keymap {
        compatible = "zmk,keymap";

        BASE {
            display-name = "Base";
            bindings = <
                &ht_0 3 N5       &kp UP    &ht_0 2 N0
                &kp LEFT   &kp DOWN   &kp RIGHT
            >;
        };

        BLUETOOTH {
            display-name = "Bluetooth";
            bindings = <
                &bt BT_SEL 0       &bt BT_SEL 1    &bt BT_SEL 2
                &bt BT_CLR          &bootloader        &none
            >;
        };

        NUM0 {
            display-name = "Num0";
            bindings = <
                &kp N1       &kp N2   &trans
                &kp N3       &kp N4   &kp N0 
            >;               
        };

        NUM5 {
            display-name = "Num5";
            bindings = <
                &trans   &kp N6   &kp N7
                &kp N5   &kp N8   &kp N9 
            >;               
        };   

        MOUSE1 {
            display-name = "MOUSE1 (Slow)";
            bindings = <
                &scroll_left_slow   &move_up_slow     &scroll_right_slow
                &move_left_slow     &move_down_slow   &move_right_slow 
            >;               
        };  

        MOUSE2 {
            display-name = "MOUSE2 (Medium)";
            bindings = <
                &scroll_left_med    &move_up_med      &scroll_right_med
                &move_left_med      &move_down_med    &move_right_med 
            >;               
        }; 

        MOUSE3 {
            display-name = "MOUSE3 (Fast)";
            bindings = <
                &scroll_left_fast   &move_up_fast     &scroll_right_fast
                &move_left_fast     &move_down_fast   &move_right_fast 
            >;               
        }; 

        MEDIA {
            display-name = "Media";
            bindings = <
                &trans  &kp C_BRI_DN   &kp C_BRI_UP
                &kp C_MUTE &kp C_VOL_DN   &kp C_VOL_UP 
            >;               
        };   
    };

    combos {
        compatible = "zmk,combos";
        combo_L {
            timeout-ms = <50>;
            key-positions = <4 5>;
            bindings = <&kp L>;
        };
        combo_J {
            timeout-ms = <50>;
            key-positions = <3 4>;
            bindings = <&kp J>;
        };
        combo_F {
            timeout-ms = <50>;
            key-positions = <0 2>;
            bindings = <&kp F>;
        };           
        combo_Space {
            timeout-ms = <50>;
            key-positions = <3 5>;
            bindings = <&kp SPACE>;
        };
        combo_shift_comma {
            timeout-ms = <50>;
            key-positions = <0 1>;
            bindings = <&kp LS(COMMA)>;
        };   
        combo_shift_dot {
            timeout-ms = <50>;
            key-positions = <1 2>;
            bindings = <&kp LS(DOT)>;
        };
        combo_C {
            timeout-ms = <50>;
            key-positions = <1 4>;
            bindings = <&kp C>;
        };   
        combo_ctl_left {
            timeout-ms = <50>;
            key-positions = <0 3>;
            bindings = <&kp LC(LEFT)>;
        };   
        combo_ctl_right {
            timeout-ms = <50>;
            key-positions = <2 5>;
            bindings = <&kp LC(RIGHT)>;
        }; 

        combo_bt_layer {
            timeout-ms = <50>;
            key-positions = <0 1 5>;
            bindings = <&tog 1>;
        };
        combo_MOUSE1 {
            timeout-ms = <50>;
            key-positions = <0 1 2>;
            bindings = <&tog 4>;
        };
        combo_MOUSE2 {
            timeout-ms = <50>;
            key-positions = <3 4 5>;
            bindings = <&tog 5>;
        };
        combo_MOUSE3 {
            timeout-ms = <50>;
            key-positions = <3 1 5>;
            bindings = <&tog 6>;
        };
    };

    behaviors {
        ht_0: hold_tap_0 {
            compatible = "zmk,behavior-hold-tap";
            label = "HOLD_TAP_0";
            #binding-cells = <2>;
            tapping-term-ms = <100>;
            quick-tap-ms = <0>;
            flavor = "tap-preferred";
            bindings = <&mo>, <&kp>;
        };

        // Custom Mouse Movement Behaviors - Slow Speed (Level 1)
        move_up_slow: move_up_slow {
            compatible = "zmk,behavior-mouse-move";
            label = "MOVE_UP_SLOW";
            #binding-cells = <0>;
            move-x = <0>;
            move-y = <(-600)>;
            time-to-max-speed-ms = <300>;
            acceleration-exponent = <1>;
        };

        move_down_slow: move_down_slow {
            compatible = "zmk,behavior-mouse-move";
            label = "MOVE_DOWN_SLOW";
            #binding-cells = <0>;
            move-x = <0>;
            move-y = <600>;
            time-to-max-speed-ms = <300>;
            acceleration-exponent = <1>;
        };

        move_left_slow: move_left_slow {
            compatible = "zmk,behavior-mouse-move";
            label = "MOVE_LEFT_SLOW";
            #binding-cells = <0>;
            move-x = <(-600)>;
            move-y = <0>;
            time-to-max-speed-ms = <300>;
            acceleration-exponent = <1>;
        };

        move_right_slow: move_right_slow {
            compatible = "zmk,behavior-mouse-move";
            label = "MOVE_RIGHT_SLOW";
            #binding-cells = <0>;
            move-x = <600>;
            move-y = <0>;
            time-to-max-speed-ms = <300>;
            acceleration-exponent = <1>;
        };

        // Custom Mouse Movement Behaviors - Medium Speed (Level 2)
        move_up_med: move_up_med {
            compatible = "zmk,behavior-mouse-move";
            label = "MOVE_UP_MED";
            #binding-cells = <0>;
            move-x = <0>;
            move-y = <(-1200)>;
            time-to-max-speed-ms = <200>;
            acceleration-exponent = <1>;
        };

        move_down_med: move_down_med {
            compatible = "zmk,behavior-mouse-move";
            label = "MOVE_DOWN_MED";
            #binding-cells = <0>;
            move-x = <0>;
            move-y = <1200>;
            time-to-max-speed-ms = <200>;
            acceleration-exponent = <1>;
        };

        move_left_med: move_left_med {
            compatible = "zmk,behavior-mouse-move";
            label = "MOVE_LEFT_MED";
            #binding-cells = <0>;
            move-x = <(-1200)>;
            move-y = <0>;
            time-to-max-speed-ms = <200>;
            acceleration-exponent = <1>;
        };

        move_right_med: move_right_med {
            compatible = "zmk,behavior-mouse-move";
            label = "MOVE_RIGHT_MED";
            #binding-cells = <0>;
            move-x = <1200>;
            move-y = <0>;
            time-to-max-speed-ms = <200>;
            acceleration-exponent = <1>;
        };

        // Custom Mouse Movement Behaviors - Fast Speed (Level 3)
        move_up_fast: move_up_fast {
            compatible = "zmk,behavior-mouse-move";
            label = "MOVE_UP_FAST";
            #binding-cells = <0>;
            move-x = <0>;
            move-y = <(-2400)>;
            time-to-max-speed-ms = <100>;
            acceleration-exponent = <2>;
        };

        move_down_fast: move_down_fast {
            compatible = "zmk,behavior-mouse-move";
            label = "MOVE_DOWN_FAST";
            #binding-cells = <0>;
            move-x = <0>;
            move-y = <2400>;
            time-to-max-speed-ms = <100>;
            acceleration-exponent = <2>;
        };

        move_left_fast: move_left_fast {
            compatible = "zmk,behavior-mouse-move";
            label = "MOVE_LEFT_FAST";
            #binding-cells = <0>;
            move-x = <(-2400)>;
            move-y = <0>;
            time-to-max-speed-ms = <100>;
            acceleration-exponent = <2>;
        };

        move_right_fast: move_right_fast {
            compatible = "zmk,behavior-mouse-move";
            label = "MOVE_RIGHT_FAST";
            #binding-cells = <0>;
            move-x = <2400>;
            move-y = <0>;
            time-to-max-speed-ms = <100>;
            acceleration-exponent = <2>;
        };

        // Custom Mouse Scroll Behaviors - Slow Speed (Level 1)
        scroll_left_slow: scroll_left_slow {
            compatible = "zmk,behavior-mouse-scroll";
            label = "SCROLL_LEFT_SLOW";
            #binding-cells = <0>;
            scroll-x = <(-20)>;
            scroll-y = <0>;
        };

        scroll_right_slow: scroll_right_slow {
            compatible = "zmk,behavior-mouse-scroll";
            label = "SCROLL_RIGHT_SLOW";
            #binding-cells = <0>;
            scroll-x = <20>;
            scroll-y = <0>;
        };

        // Custom Mouse Scroll Behaviors - Medium Speed (Level 2)
        scroll_left_med: scroll_left_med {
            compatible = "zmk,behavior-mouse-scroll";
            label = "SCROLL_LEFT_MED";
            #binding-cells = <0>;
            scroll-x = <(-50)>;
            scroll-y = <0>;
        };

        scroll_right_med: scroll_right_med {
            compatible = "zmk,behavior-mouse-scroll";
            label = "SCROLL_RIGHT_MED";
            #binding-cells = <0>;
            scroll-x = <50>;
            scroll-y = <0>;
        };

        // Custom Mouse Scroll Behaviors - Fast Speed (Level 3)
        scroll_left_fast: scroll_left_fast {
            compatible = "zmk,behavior-mouse-scroll";
            label = "SCROLL_LEFT_FAST";
            #binding-cells = <0>;
            scroll-x = <(-150)>;
            scroll-y = <0>;
        };

        scroll_right_fast: scroll_right_fast {
            compatible = "zmk,behavior-mouse-scroll";
            label = "SCROLL_RIGHT_FAST";
            #binding-cells = <0>;
            scroll-x = <150>;
            scroll-y = <0>;
        };
    };
};